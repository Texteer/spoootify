<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Health Project: Alcohol Awareness Podcast</title>
<style>
/* RESET & BODY */
* { box-sizing:border-box; margin:0; padding:0; }
body { font-family: Arial, sans-serif; background:#121212; color:white; display:flex; height:100vh; overflow:hidden; }
::-webkit-scrollbar { width:8px; }
::-webkit-scrollbar-thumb { background:#0a3d62; border-radius:4px; }
::-webkit-scrollbar-track { background:#181818; }

/* SIDE MENU (Kept for visual structure) */
.side-menu { width:70px; background:#181818; display:flex; flex-direction:column; align-items:center; padding:20px 0; border-right:1px solid #222; }
.side-menu button { background:none; border:none; color:white; font-size:24px; margin:15px 0; cursor:pointer; transition:0.2s; }
.side-menu button:hover { color:#0a3d62; transform:scale(1.2); }

/* MAIN CONTENT */
.main { flex:1; display:flex; flex-direction:column; overflow-y:auto; padding:20px; scroll-behavior:smooth; }

/* HEADER - RENAMED TO TOPIC BANNER */
.header { position:relative; height:250px; display:flex; align-items:flex-end; padding:20px; border-radius:12px; background-size:cover; background-position:center; box-shadow:0 4px 15px rgba(0,0,0,0.5); margin-bottom:20px; transition:background 0.5s; background-image:url('assets/background.jpg'); }
.header::after { content:""; position:absolute; inset:0; background:linear-gradient(to top, rgba(0,0,0,0.85), rgba(0,0,0,0.2)); border-radius:12px; }
.header h1 { position:relative; z-index:1; font-size:2.5rem; }

/* BIG PLAY BUTTON - ADDED A WARNING COLOUR */
.big-play { background:#e74c3c; /* Changed to red for 'Warning/Health' */ border:none; color:white; padding:12px 28px; font-size:18px; border-radius:30px; cursor:pointer; transition:0.2s; margin-bottom:20px; }
.big-play:hover { background:#c0392b; }

/* PODCAST LIST */
.song-list { margin-bottom:20px; }
.song-list h2 { margin-bottom:10px; }
.song-list-container { max-height:400px; overflow-y:auto; }
.song { display:grid; grid-template-columns:40px 1fr 100px 60px; align-items:center; padding:12px; margin-bottom:8px; border-radius:8px; background:rgba(255,255,255,0.05); cursor:pointer; transition:0.2s; box-shadow:0 2px 8px rgba(0,0,0,0.3); position:relative; }
.song:hover { background:rgba(10,61,98,0.3); transform:translateY(-2px); }
.song.playing { background:rgba(10,61,98,0.5); }
.playing-icon { color:#0a3d62; font-size:14px; }
.song-hover-img { position:absolute; left:-60px; width:50px; height:50px; border-radius:6px; display:none; object-fit:cover; box-shadow:0 2px 10px rgba(0,0,0,0.7); }

/* TOPIC FOCUS (RENAMED ARTIST PICK) */
.artist-pick { display:flex; align-items:center; gap:15px; padding:15px; border-radius:12px; background:rgba(255,255,255,0.05); margin-bottom:20px; box-shadow:0 2px 8px rgba(0,0,0,0.3); }
.artist-pick img { width:80px; height:80px; border-radius:8px; object-fit:cover; }

/* MINI PLAYER */
.mini-player { display:flex; align-items:center; gap:15px; padding:10px; background:#181818; border-radius:12px; margin-bottom:10px; box-shadow:0 2px 10px rgba(0,0,0,0.5); transition:0.3s; }
.mini-player img { width:50px; height:50px; border-radius:6px; object-fit:cover; transition:transform 0.3s; }
.mini-player div { flex:1; }
.mini-player button { background:#0a3d62; border:none; color:white; padding:6px 12px; border-radius:20px; cursor:pointer; transition:0.2s; }
.mini-player button:hover { background:#06527a; }

/* PLAYER */
.player { position:fixed; bottom:0; left:70px; right:0; background:#181818; padding:10px 20px; display:flex; flex-direction:column; border-top:1px solid #222; box-shadow:0 -2px 15px rgba(0,0,0,0.5); }
.controls { display:flex; justify-content:center; align-items:center; gap:15px; margin-bottom:5px; }
.controls button { background:none; border:none; color:white; font-size:20px; cursor:pointer; transition:0.2s; }
.controls button:hover { color:#0a3d62; }
.seek-bar { width:100%; -webkit-appearance:none; height:4px; background:#404040; border-radius:2px; cursor:pointer; }
.seek-bar::-webkit-slider-thumb { -webkit-appearance:none; width:12px; height:12px; border-radius:50%; background:#0a3d62; cursor:pointer; }
.volume { display:flex; align-items:center; gap:10px; margin-top:5px; }
.volume input { width:100px; }
</style>
</head>
<body>

<div class="side-menu">
    <button>🏠</button>
    <button>💡</button>
    <button>⚙️</button>
</div>

<div class="main">
  <div class="header" style="background-image:url('assets/background.jpg')">
    <h1 id="artist-name">The Alcohol Awareness Podcast</h1>
  </div>

  <div class="mini-player">
    <img src="assets/cover1.jpg" alt="Current Episode Cover">
    <div>
      <div id="mini-title">No episode playing</div>
    </div>
    <button id="miniPlay">▶ Play</button>
  </div>

  <button class="big-play" id="bigPlay">▶ Play Latest Episode</button>

  <div class="song-list">
    <h2>Episode List</h2>
    <div class="song-list-container" id="songs"></div>
  </div>

  <div class="artist-pick">
    <img src="assets/pick-cover.jpg" alt="Episode Focus" />
    <div>
      <h3>Topic Focus: Refusal Skills</h3>
      <button id="pickPlay">▶ Play Refusal Skills</button>
    </div>
  </div>
</div>

<div class="player">
  <div class="controls">
    <button id="shuffle">🔀</button>
    <button id="prev">⏮</button>
    <button id="playPause">▶</button>
    <button id="next">⏭</button>
    <button id="repeat">🔁</button>
  </div>
  <input type="range" id="seek" value="0" class="seek-bar" />
  <div class="volume">
    🔊 <input type="range" id="volume" min="0" max="1" step="0.01" value="1" />
  </div>
</div>

<script>
// ====== DATA - FIXED SYNTAX ERRORS AND CLARIFIED CONTENT ======
const songs = [
  { title: "What is peer pressure? EP1S1", streams: "2,944,087,425", length: "4:11", cover: "assets/cover1.jpg", file: "assets/song1.mp3" },
  { title: "The Effects of Alcohol (Health Risks)", streams: "1,847,477,442", length: "3:57", cover: "assets/cover2.jpg", file: "assets/song3.mp3" },
  { title: "3 Examples of Peer Pressure Tactics", streams: "1,500,000,000", length: "4:54", cover: "assets/cover3.jpg", file: "assets/song2.mp3" },
  { title: "Contingency Planning: Tips and Tricks", streams: "1,500", length: "4:54", cover: "assets/cover3.jpg", file: "assets/song4.mp3" }, /* **FIXED: Added comma here** */
  { title: "How to Look Out for a Friend (Buddy System)", streams: "1,523", length: "4:54", cover: "assets/cover3.jpg", file: "assets/song5.mp3" } /* **FIXED: This was the last element, no comma needed** */
];

const audio = new Audio();
let currentSong = 0;
let isPlaying = false;

const songsContainer = document.getElementById("songs");
const playPause = document.getElementById("playPause");
const bigPlay = document.getElementById("bigPlay");
const miniPlay = document.getElementById("miniPlay");
const seek = document.getElementById("seek");
const volume = document.getElementById("volume");
const pickPlay = document.getElementById("pickPlay");
const miniTitle = document.getElementById("mini-title");
const header = document.querySelector(".header");
const miniImg = document.querySelector(".mini-player img");

// ====== RENDER SONGS (RE-TITLED TO RENDER EPISODES) ======
function renderSongs() {
  songsContainer.innerHTML = "";
  songs.forEach((s, i) => {
    const div = document.createElement("div");
    div.classList.add("song");
    // Ensure only one item has the 'playing' class
    if(i===currentSong && isPlaying) {
        div.classList.add("playing");
    } else {
        div.classList.remove("playing");
    }

    // The 'streams' column has been renamed to 'Plays' for clarity
    div.innerHTML = `
      <div class="playing-icon">${i===currentSong&&isPlaying?"▶":""}</div>
      <div>${s.title}</div>
      <div>${s.streams} Plays</div>
      <div>${s.length}</div>
      <img src="${s.cover}" class="song-hover-img">
    `;
    // Hover thumbnail
    div.addEventListener("mouseenter",()=>{div.querySelector(".song-hover-img").style.display="block";});
    div.addEventListener("mouseleave",()=>{div.querySelector(".song-hover-img").style.display="none";});
    div.onclick = () => playEpisode(i);
    songsContainer.appendChild(div);
  });
}

// ====== PLAY FUNCTIONS (RE-TITLED TO PLAY EPISODE) ======
function playEpisode(i) {
  currentSong = i;
  const s = songs[i];
  
  // Set the audio source and try to play it
  audio.src = s.file;
  audio.play()
    .then(()=>{
        isPlaying=true; 
        updateUI();
    })
    .catch((error)=>{
        // Since you likely don't have the MP3 files, this prevents the script from crashing.
        console.error("Error playing audio. File not found or playback blocked:", error);
        // We'll simulate playback for the UI to still update
        isPlaying = true; 
        updateUI();
    });

  // UI updates
  header.style.backgroundImage = `url('${s.cover}')`;
  miniImg.src = s.cover;
  miniTitle.textContent = s.title;
  miniImg.style.transform="scale(1.1)";
  setTimeout(()=>{miniImg.style.transform="scale(1)";},300);
}

function togglePlay() {
  // If no source is loaded (initial click), play the first episode
  if(!audio.src || audio.src === window.location.href) { 
        return playEpisode(currentSong);
    }
  
  if(isPlaying) {
        audio.pause();
        isPlaying=false;
    }
  else {
        audio.play().catch(console.error);
        isPlaying=true;
    }
  updateUI();
}

function updateUI() {
  playPause.textContent=isPlaying?"⏸":"▶";
  bigPlay.textContent=isPlaying?"⏸ Pause Episode":"▶ Play Latest Episode";
  miniPlay.textContent=isPlaying?"⏸":"▶";
  renderSongs();
}

// ====== EVENT LISTENERS ======
playPause.onclick = togglePlay;
bigPlay.onclick = togglePlay;
miniPlay.onclick = togglePlay;

// Volume and Seek controls are functional
volume.oninput = ()=>audio.volume=volume.value;
seek.oninput = ()=>audio.currentTime=(seek.value/100)*audio.duration;
audio.ontimeupdate = ()=>seek.value=(audio.currentTime/audio.duration)*100||0;

// The "Topic Focus" button now plays the episode about Refusal Skills (Index 2 in the updated array)
pickPlay.onclick = ()=>playEpisode(2); 

// Initial render
renderSongs();
</script>

</body>
</html>
