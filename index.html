<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Spotify Clone</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #121212;
      color: white;
      overflow-x: hidden;
    }

    /* Header */
    .header {
      position: relative;
      height: 300px;
      display: flex;
      align-items: flex-end;
      padding: 20px;
      background-size: cover;
      background-position: center;
    }

    .header::after {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(to top, rgba(0,0,0,0.8), rgba(0,0,0,0.3));
    }

    .header h1 {
      position: relative;
      font-size: 3rem;
      margin: 0;
      z-index: 1;
    }

    /* Play button */
    .big-play {
      margin: 20px;
      background: #1db954;
      border: none;
      padding: 15px 30px;
      font-size: 18px;
      border-radius: 30px;
      cursor: pointer;
      transition: background 0.2s;
    }
    .big-play:hover {
      background: #1ed760;
    }

    /* Song list */
    .song-list {
      margin: 20px;
    }
    .song-list h2 {
      position: sticky;
      top: 0;
      background: #121212;
      padding: 10px 0;
      z-index: 2;
    }
    .song {
      display: grid;
      grid-template-columns: 30px 1fr 100px 60px;
      align-items: center;
      padding: 8px;
      cursor: pointer;
      border-radius: 6px;
    }
    .song:hover {
      background: rgba(255,255,255,0.1);
    }
    .song.playing {
      background: rgba(29,185,84,0.2);
    }
    .song .playing-icon {
      color: #1db954;
      font-size: 14px;
    }

    /* Artist pick */
    .artist-pick {
      margin: 20px;
      display: flex;
      align-items: center;
      gap: 15px;
      background: rgba(255,255,255,0.05);
      padding: 15px;
      border-radius: 12px;
    }
    .artist-pick img {
      width: 80px;
      height: 80px;
      border-radius: 8px;
      object-fit: cover;
    }
    .artist-pick button {
      background: #1db954;
      border: none;
      padding: 10px 20px;
      border-radius: 30px;
      cursor: pointer;
    }

    /* Bottom player */
    .player {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: #181818;
      display: flex;
      flex-direction: column;
      padding: 10px 20px;
    }
    .controls {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 15px;
      margin-bottom: 5px;
    }
    .controls button {
      background: none;
      border: none;
      color: white;
      font-size: 18px;
      cursor: pointer;
    }
    .seek-bar {
      width: 100%;
      -webkit-appearance: none;
      appearance: none;
      height: 4px;
      background: #404040;
      border-radius: 2px;
      cursor: pointer;
    }
    .seek-bar::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: #1db954;
      cursor: pointer;
    }
    .volume {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-top: 5px;
    }
    .volume input {
      width: 100px;
    }
  </style>
</head>
<body>
  <div class="header" style="background-image:url('assets/background.jpg')">
    <h1 id="artist-name">Lady Gaga</h1>
  </div>

  <button class="big-play" id="bigPlay">‚ñ∂ Play</button>

  <div class="song-list">
    <h2>Popular</h2>
    <div id="songs"></div>
  </div>

  <div class="artist-pick">
    <img src="assets/pick-cover.jpg" alt="pick cover" />
    <div>
      <h3>Artist‚Äôs Pick</h3>
      <button id="pickPlay">‚ñ∂ Play Pick</button>
    </div>
  </div>

  <div class="player">
    <div class="controls">
      <button id="shuffle">üîÄ</button>
      <button id="prev">‚èÆ</button>
      <button id="playPause">‚ñ∂</button>
      <button id="next">‚è≠</button>
      <button id="repeat">üîÅ</button>
    </div>
    <input type="range" id="seek" value="0" class="seek-bar" />
    <div class="volume">
      üîä <input type="range" id="volume" min="0" max="1" step="0.01" value="1" />
    </div>
  </div>

  <script>
    const songs = [
      {
        title: "Die With A Smile",
        streams: "2,944,087,425",
        length: "4:11",
        cover: "assets/cover1.jpg",
        file: "assets/song1.mp3"
      },
      {
        title: "Poker Face",
        streams: "1,847,477,442",
        length: "3:57",
        cover: "assets/cover2.jpg",
        file: "assets/song2.mp3"
      }
    ];

    const audio = new Audio();
    let currentSong = 0;
    let isPlaying = false;
    let shuffle = false;
    let repeat = "off"; // off, one, all

    // preload covers
    songs.forEach(s => {
      const img = new Image();
      img.src = s.cover;
    });

    const songsContainer = document.getElementById("songs");
    const playPause = document.getElementById("playPause");
    const bigPlay = document.getElementById("bigPlay");
    const seek = document.getElementById("seek");
    const volume = document.getElementById("volume");
    const shuffleBtn = document.getElementById("shuffle");
    const repeatBtn = document.getElementById("repeat");
    const prevBtn = document.getElementById("prev");
    const nextBtn = document.getElementById("next");
    const pickPlay = document.getElementById("pickPlay");

    function renderSongs() {
      songsContainer.innerHTML = "";
      songs.forEach((s, i) => {
        const div = document.createElement("div");
        div.classList.add("song");
        if (i === currentSong) div.classList.add("playing");
        div.innerHTML = `
          <div class="playing-icon">${i === currentSong && isPlaying ? "‚ñ∂" : ""}</div>
          <div>${s.title}</div>
          <div>${s.streams}</div>
          <div>${s.length}</div>
        `;
        div.onclick = () => playSong(i);
        songsContainer.appendChild(div);
      });
    }

    function playSong(i) {
      currentSong = i;
      audio.src = songs[i].file;
      audio.play();
      isPlaying = true;
      updateUI();
    }

    function togglePlay() {
      if (isPlaying) {
        audio.pause();
        isPlaying = false;
      } else {
        audio.play();
        isPlaying = true;
      }
      updateUI();
    }

    function updateUI() {
      playPause.textContent = isPlaying ? "‚è∏" : "‚ñ∂";
      bigPlay.textContent = isPlaying ? "‚è∏ Pause" : "‚ñ∂ Play";
      renderSongs();
    }

    // Event listeners
    playPause.onclick = togglePlay;
    bigPlay.onclick = togglePlay;
    volume.oninput = () => (audio.volume = volume.value);
    seek.oninput = () => (audio.currentTime = (seek.value / 100) * audio.duration);

    audio.ontimeupdate = () => {
      seek.value = (audio.currentTime / audio.duration) * 100 || 0;
    };

    audio.onended = () => {
      if (repeat === "one") {
        playSong(currentSong);
      } else if (shuffle) {
        playSong(Math.floor(Math.random() * songs.length));
      } else if (currentSong < songs.length - 1) {
        playSong(currentSong + 1);
      } else if (repeat === "all") {
        playSong(0);
      } else {
        isPlaying = false;
        updateUI();
      }
    };

    shuffleBtn.onclick = () => {
      shuffle = !shuffle;
      shuffleBtn.style.color = shuffle ? "#1db954" : "white";
    };

    repeatBtn.onclick = () => {
      if (repeat === "off") {
        repeat = "all";
        repeatBtn.textContent = "üîÇ";
      } else if (repeat === "all") {
        repeat = "one";
        repeatBtn.textContent = "üîÅ1";
      } else {
        repeat = "off";
        repeatBtn.textContent = "üîÅ";
      }
    };

    prevBtn.onclick = () => {
      if (audio.currentTime > 5) {
        audio.currentTime = 0;
      } else {
        playSong((currentSong - 1 + songs.length) % songs.length);
      }
    };
    nextBtn.onclick = () => {
      if (shuffle) {
        playSong(Math.floor(Math.random() * songs.length));
      } else {
        playSong((currentSong + 1) % songs.length);
      }
    };

    pickPlay.onclick = () => {
      playSong(0); // play first song for now
    };

    // Keyboard shortcuts
    document.addEventListener("keydown", e => {
      if (e.code === "Space") {
        e.preventDefault();
        togglePlay();
      } else if (e.code === "ArrowRight") {
        audio.currentTime += 5;
      } else if (e.code === "ArrowLeft") {
        audio.currentTime -= 5;
      } else if (e.code === "ArrowUp") {
        playSong((currentSong - 1 + songs.length) % songs.length);
      } else if (e.code === "ArrowDown") {
        playSong((currentSong + 1) % songs.length);
      }
    });

    renderSongs();
  </script>
</body>
</html>
